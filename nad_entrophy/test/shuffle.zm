
import stimuli;

/*
 * An sequence of stimuli is considered correct when no
 * subsequent stimuli are the same.
 */
bool check_order(TestItem[] array) {
    int i = 1;
    while (i < array.size) {
        TestItem i0 = array[i-1];
        TestItem i1 = array[i];
        if (i0.sndfn == i1.sndfn)
            return false;
    }
    return true;
}

// Shuffles test_items table 
int shuffle_test_items(TestItem[] input, int max_tries=1000)
{
    input.shuffle(0, -1);
    int ntries = 0;
    while (check_order(input) == false && ntries < max_tries) {
        input.shuffle(0, -1);
        ntries++;
    }

    if (!check_order(input))
        return ERROR;

    return OK;
}

